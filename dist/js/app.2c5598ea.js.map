{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/Welcome.vue?d91c","webpack:///./src/components/Sidebar.vue?7464","webpack:///./src/components/SingleChatroom/newChatForm.vue?e872","webpack:///./src/components/Loader.vue?567f","webpack:///./src/components/SingleChatroom/messages.vue?6a2b","webpack:///./src/components/SingleChatroom/displayName.vue?d9b0","webpack:///./src/components/Friends/AboutMe.vue?50a8","webpack:///./src/App.vue","webpack:///./src/App.vue?6697","webpack:///./src/views/Welcome.vue","webpack:///./src/components/LoginForm.vue","webpack:///./src/firebase/config.js","webpack:///./src/composables/useLogin.js","webpack:///./src/composables/getUser.js","webpack:///./src/composables/useDocuments.js","webpack:///./src/components/LoginForm.vue?90a4","webpack:///./src/components/SignupForm.vue","webpack:///./src/composables/useSignup.js","webpack:///./src/composables/useCollection.js","webpack:///./src/components/SignupForm.vue?4515","webpack:///./src/views/Welcome.vue?753f","webpack:///./src/views/Chatroom.vue","webpack:///./src/components/Navbar.vue","webpack:///./src/composables/useLogout.js","webpack:///./src/composables/getDocument.js","webpack:///./src/components/Navbar.vue?9af1","webpack:///./src/components/Sidebar.vue","webpack:///./src/components/Sidebar.vue?4586","webpack:///./src/components/Friends.vue","webpack:///./src/components/Friends/AboutMe.vue","webpack:///./src/composables/useNestedCollection.js","webpack:///./src/components/Loader.vue","webpack:///./src/components/Loader.vue?4394","webpack:///./src/components/Friends/AboutMe.vue?863b","webpack:///./src/components/Friends/ChatroomList.vue","webpack:///./src/composables/getNestedCollection.js","webpack:///./src/components/Friends/ChatroomList.vue?35e9","webpack:///./src/components/Friends/FriendList.vue","webpack:///./src/components/Friends/FriendList.vue?b489","webpack:///./src/components/Friends/AddFriendForm.vue","webpack:///./src/components/Friends/AddFriendForm.vue?f43b","webpack:///./src/components/Friends/FriendRequestList.vue","webpack:///./src/components/Friends/FriendRequestList.vue?d7e3","webpack:///./src/components/SingleChatroom.vue","webpack:///./src/components/SingleChatroom/displayName.vue","webpack:///./src/components/SingleChatroom/displayName.vue?85bd","webpack:///./src/components/SingleChatroom/messages.vue","webpack:///./src/components/SingleChatroom/messages.vue?d5cd","webpack:///./src/components/SingleChatroom/newChatForm.vue","webpack:///./src/composables/useBreakPoints","webpack:///./src/components/SingleChatroom/newChatForm.vue?21ab","webpack:///./src/components/SingleChatroom.vue?246a","webpack:///./src/components/Friends.vue?ade2","webpack:///./src/views/Chatroom.vue?d50b","webpack:///./src/main.js","webpack:///./src/router/index.js","webpack:///./src/components/Friends/ChatroomList.vue?f343","webpack:///./src/views/Chatroom.vue?40fa","webpack:///./src/components/SignupForm.vue?fbec","webpack:///./src/components/LoginForm.vue?5398","webpack:///./src/components/Friends/AddFriendForm.vue?b849","webpack:///./src/components/Friends.vue?6072","webpack:///./src/components/SingleChatroom.vue?9645","webpack:///./src/components/Friends/FriendList.vue?2f22","webpack:///./src/components/Friends/FriendRequestList.vue?1b02","webpack:///./src/App.vue?7d70","webpack:///./src/components/Navbar.vue?78ca"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","class","css","components","vue100vh","setup","__exports__","render","welcom-form","showLogin","enterChatroom","disabled","handleSubmit","type","required","placeholder","email","autocomplete","password","error","isPending","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","firebase","initializeApp","projectAuth","auth","projectFirestore","firestore","timestamp","database","FieldValue","serverTimestamp","FieldPath","ref","login","signInWithEmailAndPassword","res","console","log","message","userLogin","user","currentUser","onAuthStateChanged","_user","getUser","useDocument","collection","id","docRef","doc","addDoc","set","err","deleteDoc","delete","updateDoc","updates","update","document","useLogin","useDocuments","props","context","emit","displayName","maxlength","signup","createUserWithEmailAndPassword","Error","updateProfile","useSignup","useCollection","add","addDocWithId","router","uid","userId","statusMessage","requestIsRead","messageIsRead","params","LoginForm","SignupForm","userInfo","handleClick","logout","signOut","useLogout","getDocument","documentRef","unsub","onSnapshot","watchEffect","onInvalidate","activeEl","addActive","el","routeParams","showNameInput","showStatusInput","handleSubmitName","handleSubmitStatus","collection2","Loader","friendList","chatroomList","sendRequestList","getUserFriendList","then","forEach","getUserChatroomList","friendId","chatroomId","getUserSendRequestList","useNestedCollection","friendInfo","sendRequest","formattedChatroomList","chatroom","dialog","lastInteractAt","isRead","getCollection","orderBy","query","documents","collectionRef","where","snap","results","docs","route","timeArr","updateUserInfo","getNestedCollection","map","friend","time","intlFormat","fromUnixTime","hour","minute","Date","getTime","isActive","userDisplayName","updateChatroomDisplay","isDisplay","buttonText","userFriendList","trim","includes","exists","userRequest","requests","request","handleDelete","handleAccept","randomstring","generate","randomId","chatroomData","usersId","inviterChatroomData","chatroomOrder","lastRead","inviterFriendListData","reciverChatroomData","reciverFriendListData","showSingleChatroom","formattedMessages","createdAt","messages","chatroomMessages","getChatroomInfo","seconds","msg","scrollTop","scrollHeight","width","handleLineFeed","windowWidth","innerWidth","onWidthChange","addEventListener","removeEventListener","userChange","sharedChatroom","getFriendChatroomInfo","chatroomInfo","userChatroom","friendChatroom","chat","updateFriendChatroom","newChatForm","pages","SingleChatroom","FriendList","ChatroomList","AddFriendList","FriendRequestList","AboutMe","toggleActiveChatroom","Navbar","Sidebar","Friends","app","requireNoAuth","to","from","next","requireAuth","routes","path","component","Welcome","beforeEnter","Chatroom","createRouter","history","createWebHistory","process","createApp","App","use","mount"],"mappings":"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","file":"js/app.2c5598ea.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Welcome.vue?vue&type=style&index=0&id=3788e1e6&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Sidebar.vue?vue&type=style&index=0&id=598800a3&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./newChatForm.vue?vue&type=style&index=0&id=239da706&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Loader.vue?vue&type=style&index=0&id=691a2f68&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./messages.vue?vue&type=style&index=0&id=b625160e&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./displayName.vue?vue&type=style&index=0&id=41637e34&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./AboutMe.vue?vue&type=style&index=0&id=4b9a9b4a&lang=css\"","<template>\n  <vue100vh class=\"container\" :css=\"{ height: '100rvh' }\">\n    <router-view />\n  </vue100vh>\n</template>\n\n<script>\n// import Vue100vh from 'vue-div-100vh';\nimport vue100vh from 'vue-100vh';\nexport default {\n  components: { vue100vh },\n  setup() {},\n};\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n\n.container {\n  width: 100vw;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n</style>\n","import { render } from \"./App.vue?vue&type=template&id=cae6a4f6\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=cae6a4f6&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div welcom-form>\n    <h1>馬鈴薯聊天室</h1>\n    <div class=\"welcome container\">\n      <div class=\"login-form\" v-if=\"showLogin\">\n        <h3>登入帳號</h3>\n        <loginForm @login=\"enterChatroom\" />\n        <p>還沒有帳號？ <span @click=\"showLogin = false\">註冊帳號</span></p>\n      </div>\n\n      <div class=\"signup-form\" v-else>\n        <h3>註冊帳號</h3>\n        <SignupForm />\n        <p>已經有帳號了？ <span @click=\"showLogin = true\">登入帳號</span></p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from '@vue/reactivity';\nimport LoginForm from '../components/LoginForm.vue';\nimport SignupForm from '../components/SignupForm.vue';\nimport { useRouter } from 'vue-router';\nimport getUser from '@/composables/getUser';\nexport default {\n  components: { LoginForm, SignupForm, getUser },\n  setup() {\n    const showLogin = ref(true);\n    const router = useRouter();\n    const enterChatroom = () => {\n      router.push({ name: 'Chatroom', params: { id: 'friendList' } });\n    };\n\n    return { showLogin, enterChatroom };\n  },\n};\n</script>\n\n<style>\n.welcom-form {\n  height: 100%;\n  width: 100%;\n}\n\nh1 {\n  width: 100vw;\n  font-size: 3rem;\n  color: #fea634;\n  margin-bottom: 0.5rem;\n}\n\n.welcome {\n  background: #333437;\n  border-radius: 1rem;\n  width: 90%;\n  margin: 0rem auto;\n  display: flex;\n  flex-direction: column;\n}\n\n.welcome h3 {\n  display: block;\n  color: white;\n  font-size: 1.5rem;\n  margin: 0.3em 0px;\n}\n\n.welcome p {\n  margin: 0.8em 0px;\n  color: white;\n  font-size: 1em;\n}\n\n.welcome span {\n  font-weight: bold;\n  text-decoration: underline;\n  cursor: pointer;\n}\n\n.welcome button {\n  font-size: 1rem;\n  margin-top: 0.5em;\n  width: 100%;\n}\n\n@media (min-width: 768px) {\n  h1 {\n    color: #fea634;\n  }\n\n  .welcome {\n    width: 500px;\n  }\n\n  .welcome span {\n    font-weight: bold;\n    text-decoration: underline;\n    cursor: pointer;\n  }\n}\n</style>\n","<template>\n  <form @submit.prevent=\"handleSubmit\">\n    <div class=\"inputs\">\n      <input\n        type=\"email\"\n        required\n        placeholder=\"電子郵件帳號\"\n        v-model=\"email\"\n        autocomplete=\"off\"\n      />\n      <input\n        type=\"password\"\n        required\n        placeholder=\"密碼\"\n        v-model=\"password\"\n        autocomplete=\"off\"\n      />\n    </div>\n    <div class=\"error\">{{ error }}</div>\n    <button v-if=\"!isPending\">登入</button>\n    <button v-if=\"isPending\" disabled>登入中...</button>\n  </form>\n</template>\n\n<script>\nimport { ref } from '@vue/reactivity';\nimport useLogin from '@/composables/useLogin';\nimport getUser from '@/composables/getUser';\nimport useDocuments from '@/composables/useDocuments';\nexport default {\n  components: { useLogin, getUser, useDocuments },\n  setup(props, context) {\n    const email = ref('');\n    const password = ref('');\n    const { error, login, isPending } = useLogin();\n    const { user } = getUser();\n\n    const handleSubmit = async () => {\n      await login(email.value, password.value);\n      if (!error.value) {\n        context.emit('login');\n      }\n    };\n\n    return { email, password, handleSubmit, error, isPending };\n  },\n};\n</script>\n\n<style>\n.login-form {\n  width: 90%;\n  margin: 0rem auto;\n}\n\n.login-form .inputs {\n  width: 100%;\n  border: 1px solid #6c6c6c;\n  margin: 0px auto;\n  border-radius: 5px;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 0.5em;\n}\n\n.inputs :last-child {\n  border-bottom: none;\n}\n\n.login-form input {\n  font-size: 1rem;\n  background-color: inherit;\n  color: white;\n  padding: 1em 0.6em;\n  border: none;\n  border-radius: 0rem;\n  border-bottom: 0.1em solid #6c6c6c;\n  outline: none;\n}\n\n@media (min-width: 768px) {\n  .login-form {\n    width: 70%;\n  }\n}\n</style>\n","import firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport 'firebase/database';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyDJsSy-Yx5kA95C4ixotoreAOoCSDX6Twg',\n  authDomain: 'potato-chatroom.firebaseapp.com',\n  projectId: 'potato-chatroom',\n  storageBucket: 'potato-chatroom.appspot.com',\n  messagingSenderId: '570591132864',\n  appId: '1:570591132864:web:8572d473306e8555138125',\n};\nfirebase.initializeApp(firebaseConfig);\n\nconst projectAuth = firebase.auth();\nconst projectFirestore = firebase.firestore();\nconst projectDatabase = firebase.database();\nconst timestamp = firebase.firestore.FieldValue.serverTimestamp;\nconst fieldPath = firebase.firestore.FieldPath;\n\nexport { projectDatabase, projectAuth, projectFirestore, timestamp, fieldPath };\n","import { ref } from '@vue/reactivity';\nimport { projectAuth } from '../firebase/config';\n\nconst error = ref(null);\nconst isPending = ref(false);\n\nconst login = async (email, password) => {\n  error.value = '';\n  isPending.value = true;\n\n  try {\n    const res = await projectAuth.signInWithEmailAndPassword(email, password);\n    error.value = null;\n    isPending.value = false;\n    return res;\n  } catch (err) {\n    console.log(err.message);\n    error.value = '帳號或密碼無效，請再輸入一次';\n    isPending.value = false;\n  }\n};\n\nconst userLogin = () => {\n  return { error, login, isPending };\n};\n\nexport default userLogin;\n","import { ref } from '@vue/reactivity';\nimport { projectAuth } from '../firebase/config';\n\nconst user = ref(projectAuth.currentUser);\n\nprojectAuth.onAuthStateChanged(_user => {\n  user.value = _user;\n});\n\nconst getUser = () => {\n  return { user };\n};\n\nexport default getUser;\n","import { ref } from 'vue';\nimport { projectFirestore } from '../firebase/config';\n\nconst useDocument = (collection, id) => {\n  const error = ref(null);\n  const isPending = ref(false);\n\n  let docRef = projectFirestore.collection(collection).doc(id);\n\n  const addDoc = async data => {\n    isPending.value = true;\n    error.value = null;\n    try {\n      docRef.set(data);\n    } catch (err) {\n      console.log(err.message);\n      error.value = '無法新增資料，請再試一次';\n      isPending.value = false;\n    }\n  };\n\n  const deleteDoc = async () => {\n    isPending.value = true;\n    error.value = null;\n    try {\n      const res = await docRef.delete();\n      isPending.value = false;\n      return res;\n    } catch (err) {\n      console.log(err.message);\n      error.value = '無法刪除資料，請再試一次';\n      isPending.value = false;\n    }\n  };\n\n  const updateDoc = async updates => {\n    isPending.value = true;\n    error.value = null;\n    try {\n      const res = await docRef.update(updates);\n      isPending.value = false;\n      return res;\n    } catch (err) {\n      console.log(err.message);\n      error.value = '無法更新資料，請再試一次';\n      isPending.value = false;\n    }\n  };\n\n  return { error, isPending, document, deleteDoc, updateDoc, addDoc };\n};\n\nexport default useDocument;\n","import { render } from \"./LoginForm.vue?vue&type=template&id=6fd22314\"\nimport script from \"./LoginForm.vue?vue&type=script&lang=js\"\nexport * from \"./LoginForm.vue?vue&type=script&lang=js\"\n\nimport \"./LoginForm.vue?vue&type=style&index=0&id=6fd22314&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <form @submit.prevent=\"handleSubmit\">\n    <div class=\"inputs\">\n      <input\n        type=\"text\"\n        required\n        placeholder=\"暱稱 (最多10字，日後可修改)\"\n        v-model=\"displayName\"\n        autocomplete=\"off\"\n        maxlength=\"5\"\n      />\n      <input\n        type=\"email\"\n        required\n        placeholder=\"電子郵件帳號\"\n        v-model=\"email\"\n        autocomplete=\"off\"\n      />\n      <input\n        type=\"password\"\n        required\n        placeholder=\"密碼\"\n        v-model=\"password\"\n        autocomplete=\"off\"\n      />\n    </div>\n    <div class=\"error\">{{ error }}</div>\n    <button v-if=\"!isPending\">註冊</button>\n    <button v-if=\"isPending\" disabled>註冊中...</button>\n  </form>\n</template>\n\n<script>\nimport { ref } from '@vue/reactivity';\nimport useSignup from '@/composables/useSignup';\nimport useCollection from '@/composables/useCollection';\nimport getUser from '@/composables/getUser';\nimport { useRouter } from 'vue-router';\n\nexport default {\n  components: { useCollection },\n  setup() {\n    const email = ref('');\n    const password = ref('');\n    const displayName = ref('');\n    const { error, signup, isPending } = useSignup();\n    const { addDocWithId } = useCollection('users');\n    const { user } = getUser();\n    const router = useRouter();\n\n    const handleSubmit = async () => {\n      await signup(email.value, password.value, displayName.value);\n\n      if (!error.value) {\n        await addDocWithId(user.value.uid, {\n          displayName: user.value.displayName,\n          userId: user.value.uid,\n          statusMessage: '尚未設定狀態',\n          requestIsRead: true,\n          messageIsRead: true,\n        });\n        router.push({ name: 'Chatroom', params: { id: 'friendList' } });\n      }\n    };\n\n    return {\n      email,\n      password,\n      handleSubmit,\n      displayName,\n      error,\n      signup,\n      isPending,\n    };\n  },\n};\n</script>\n\n<style>\n.signup-form {\n  width: 90%;\n  margin: 0rem auto;\n}\n\n.signup-form .inputs {\n  width: 100%;\n  border: 1px solid #6c6c6c;\n  margin: 0px auto;\n  border-radius: 5px;\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 0.5em;\n}\n\n.signup-form .inputs :last-child {\n  border-bottom: none;\n}\n\n.signup-form input {\n  font-size: 1rem;\n  background-color: inherit;\n  color: white;\n  padding: 1em 0.6em;\n  border: none;\n  border-radius: 0rem;\n  border-bottom: 0.1em solid #6c6c6c;\n  outline: none;\n}\n\n@media (min-width: 768px) {\n  .signup-form {\n    width: 70%;\n  }\n}\n</style>\n","import { ref } from '@vue/reactivity';\nimport { projectAuth } from '../firebase/config';\n\nconst error = ref(null);\nconst isPending = ref(false);\n\nconst signup = async (email, password, displayName) => {\n  error.value = null;\n  isPending.value = true;\n\n  try {\n    const res = await projectAuth.createUserWithEmailAndPassword(\n      email,\n      password\n    );\n    if (!res) {\n      throw new Error('無法完成註冊');\n    }\n    await res.user.updateProfile({ displayName });\n    isPending.value = false;\n\n    return res;\n  } catch (err) {\n    console.log(err.message);\n    error.value = err.message;\n    isPending.value = false;\n  }\n};\n\nconst useSignup = () => {\n  return { error, signup, isPending };\n};\n\nexport default useSignup;\n","import { ref } from '@vue/reactivity';\nimport { projectFirestore } from '../firebase/config';\n\nconst useCollection = collection => {\n  const error = ref(null);\n\n  const addDoc = async doc => {\n    error.value = null;\n    try {\n      await projectFirestore.collection(collection).add(doc);\n    } catch (err) {\n      console.log(err.message);\n      error.value = 'could not send the message';\n    }\n  };\n\n  const addDocWithId = async (id, doc) => {\n    error.value = null;\n    try {\n      await projectFirestore.collection(collection).doc(id).set(doc);\n    } catch (err) {\n      console.log(err.message);\n      error.value = 'could not send the message';\n    }\n  };\n\n  return { error, addDoc, addDocWithId };\n};\n\nexport default useCollection;\n","import { render } from \"./SignupForm.vue?vue&type=template&id=46a80bea\"\nimport script from \"./SignupForm.vue?vue&type=script&lang=js\"\nexport * from \"./SignupForm.vue?vue&type=script&lang=js\"\n\nimport \"./SignupForm.vue?vue&type=style&index=0&id=46a80bea&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Welcome.vue?vue&type=template&id=3788e1e6\"\nimport script from \"./Welcome.vue?vue&type=script&lang=js\"\nexport * from \"./Welcome.vue?vue&type=script&lang=js\"\n\nimport \"./Welcome.vue?vue&type=style&index=0&id=3788e1e6&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"chatroom\">\n    <Navbar />\n    <Sidebar />\n    <Friends />\n    <SingleChatroom />\n  </div>\n</template>\n\n<script>\nimport Navbar from '@/components/Navbar';\nimport Sidebar from '@/components/Sidebar';\nimport Friends from '@/components/Friends';\nimport SingleChatroom from '@/components/SingleChatroom';\n\nexport default {\n  props: ['id'],\n  components: { Navbar, Sidebar, Friends, SingleChatroom },\n  setup() {},\n};\n</script>\n\n<style>\n.chatroom {\n  display: grid;\n  grid-template-rows: 4rem calc(100% - 8rem) 4rem;\n  grid-template-columns: 100vw 100vw;\n  overflow: hidden;\n  height: 100%;\n}\n\n@media (min-width: 768px) {\n  .chatroom {\n    grid-template-rows: 4em calc(100% - 4rem);\n    grid-template-columns: 4.5em 18em auto;\n  }\n}\n</style>\n","<template>\n  <nav class=\"navbar\" v-if=\"user && userInfo\">\n    <div>\n      <p class=\"display-name\">您好，{{ userInfo.displayName }}</p>\n      <p class=\"email\">{{ user.email }}</p>\n    </div>\n    <button @click=\"handleClick\">登出</button>\n  </nav>\n</template>\n\n<script>\nimport getUser from '@/composables/getUser';\nimport useLogout from '@/composables/useLogout';\nimport { useRouter } from 'vue-router';\nimport getDocument from '@/composables/getDocument.js';\n\nexport default {\n  components: { useLogout },\n  setup() {\n    const { logout, error } = useLogout();\n    const router = useRouter();\n    const { user } = getUser();\n    const { document: userInfo } = getDocument('users', user.value.uid);\n\n    const handleClick = async () => {\n      await logout();\n      if (!error.value) {\n        router.push({ name: 'Welcome' });\n      }\n    };\n\n    return { user, handleClick, userInfo };\n  },\n};\n</script>\n\n<style>\n.navbar {\n  grid-row: 1;\n  grid-column: 1;\n  background-color: #222222;\n  padding: 0rem 1rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.navbar p {\n  font-size: 1.2rem;\n  color: white;\n  text-align: left;\n}\n.navbar p.display-name {\n  font-weight: 700;\n}\n\n.navbar p.email {\n  font-size: 0.8rem;\n  color: #999;\n}\n\n.navbar button {\n  color: white;\n\n  padding: 0.5em 0.8em;\n  font-size: 0.8rem;\n  font-weight: 500;\n}\n\n@media (min-width: 768px) {\n  .navbar {\n    width: calc(100vw - 4.5em);\n    background-color: #333437;\n    border-bottom: 1px solid #464749;\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    gap: 15px;\n    grid-row: 1;\n    grid-column: 2/4;\n    padding: 0;\n  }\n\n  .navbar p {\n    font-size: 16px;\n    color: white;\n    text-align: center;\n  }\n  .navbar p.display-name {\n    font-weight: 700;\n  }\n\n  .navbar p.email {\n    font-size: 14px;\n    color: #999;\n  }\n\n  .navbar button {\n    padding: 8px 12px;\n    color: white;\n    font-size: 15px;\n    font-weight: 500;\n    margin-right: 1em;\n  }\n}\n</style>\n","import { ref } from '@vue/reactivity';\nimport { projectAuth } from '../firebase/config';\n\nconst error = ref(null);\nconst isPending = ref(false);\n\nconst logout = async () => {\n  error.value = null;\n  isPending.value = true;\n\n  try {\n    await projectAuth.signOut();\n    // console.log(projectAuth.currentUser);\n    isPending.value = false;\n  } catch (err) {\n    console.log(err.message);\n    error.value = err.message;\n    isPending.value = false;\n  }\n};\n\nconst useLogout = () => {\n  return { logout, error, isPending };\n};\n\nexport default useLogout;\n","import { ref, watchEffect } from 'vue';\nimport { projectFirestore } from '../firebase/config';\n\nconst getDocument = (collection, id) => {\n  const document = ref(null);\n  const error = ref(null);\n\n  // register the firebase collection reference\n  let documentRef = projectFirestore.collection(collection).doc(id);\n\n  const unsub = documentRef.onSnapshot(\n    doc => {\n      if (doc.data()) {\n        document.value = { ...doc.data(), id: doc.id };\n        error.value = null;\n      } else {\n        error.value = '此資料不存在。';\n        document.value = null;\n      }\n    },\n    err => {\n      console.log(err.message);\n      error.value = '無法取得資料';\n    }\n  );\n\n  watchEffect(onInvalidate => {\n    onInvalidate(() => unsub());\n  });\n\n  return { document, error };\n};\n\nexport default getDocument;\n","import { render } from \"./Navbar.vue?vue&type=template&id=3e3fb740\"\nimport script from \"./Navbar.vue?vue&type=script&lang=js\"\nexport * from \"./Navbar.vue?vue&type=script&lang=js\"\n\nimport \"./Navbar.vue?vue&type=style&index=0&id=3e3fb740&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <aside class=\"sidebar\">\n    <div class=\"buttons\">\n      <span\n        class=\"material-icons\"\n        :class=\"{ active: activeEl == 'friendList' }\"\n        @click=\"handleClick('friendList'), addActive('friendList')\"\n      >\n        people\n        <p>好友</p>\n      </span>\n\n      <span\n        class=\"material-icons\"\n        :class=\"[\n          activeEl == 'chatrooms' ? 'active' : '',\n          document?.messageIsRead ? '' : 'new',\n        ]\"\n        @click=\"\n          handleClick('chatrooms');\n          addActive('chatrooms');\n        \"\n      >\n        question_answer\n        <p>聊天室</p>\n      </span>\n      <span\n        class=\"material-icons\"\n        :class=\"{ active: activeEl == 'addFriends' }\"\n        @click=\"\n          handleClick('addFriends');\n          addActive('addFriends');\n        \"\n      >\n        person_add\n        <p>加入好友</p>\n      </span>\n      <span\n        class=\"material-icons\"\n        :class=\"[\n          activeEl == 'friendRequests' ? 'active' : '',\n          document?.requestIsRead ? '' : 'new',\n        ]\"\n        @click=\"\n          handleClick('friendRequests');\n          addActive('friendRequests');\n        \"\n      >\n        group_add\n        <p>好友邀請</p>\n      </span>\n\n      <span\n        class=\"material-icons\"\n        :class=\"{ active: activeEl == 'aboutMe' }\"\n        @click=\"\n          handleClick('aboutMe');\n          addActive('aboutMe');\n        \"\n        >manage_accounts\n        <p>關於自己</p></span\n      >\n    </div>\n  </aside>\n</template>\n\n<script>\nimport { ref } from '@vue/reactivity';\nimport { useRouter } from 'vue-router';\nimport getDocument from '@/composables/getDocument';\nimport useDocuments from '@/composables/useDocuments';\nimport getUser from '@/composables/getUser.js';\n\nexport default {\n  setup() {\n    const activeEl = ref();\n    const router = useRouter();\n    const { user } = getUser();\n    const userId = user.value.uid;\n    const { document } = getDocument('users', userId);\n\n    const handleClick = params => {\n      router.push({ name: 'Chatroom', params: { id: params } });\n    };\n\n    const addActive = el => {\n      activeEl.value = el;\n      if (el === 'chatrooms') {\n        const { updateDoc } = useDocuments('users', userId);\n        updateDoc({ messageIsRead: true });\n      }\n\n      if (el === 'friendRequests') {\n        const { updateDoc } = useDocuments('users', userId);\n        updateDoc({ requestIsRead: true });\n      }\n    };\n\n    return {\n      handleClick,\n      activeEl,\n      addActive,\n      document,\n    };\n  },\n};\n</script>\n\n<style>\n.sidebar {\n  background-color: #222222;\n  grid-row: 3/4;\n  grid-column: 1;\n}\n\n.sidebar .buttons {\n  display: flex;\n  align-items: center;\n  height: 100%;\n  padding: 0px 1em;\n  justify-content: space-between;\n}\n\n.sidebar .material-icons {\n  color: #777;\n  font-size: 2rem;\n  cursor: pointer;\n  display: block;\n}\n\n.sidebar .material-icons p {\n  font-size: 0.5rem;\n}\n\n.sidebar .material-icons:hover {\n  color: #ddd;\n}\n\n.sidebar .material-icons.active {\n  color: #eee;\n}\n\n.sidebar .material-icons.new {\n  position: relative;\n}\n\n.sidebar .material-icons.new::after {\n  content: 'NEW';\n  color: white;\n  font-size: 0.8rem;\n  padding: 0.4rem 0.4em 0.5em 0.4em;\n  border-radius: 0.5em;\n  background-color: red;\n  position: absolute;\n  top: 1em;\n  left: 1em;\n  font-weight: 700;\n  transform: scale(0.8);\n}\n\n@media (min-width: 768px) {\n  .sidebar {\n    height: 100vh;\n    grid-row: 1/3;\n    grid-column: 1;\n  }\n\n  .sidebar .buttons {\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    gap: 1.5rem;\n    margin-top: 1em;\n  }\n\n  .sidebar .material-icons.new::after {\n    padding: 0.2rem 0.4em 0.5em 0.4em;\n    top: 0.9em;\n    left: 0.7em;\n  }\n}\n</style>\n","import { render } from \"./Sidebar.vue?vue&type=template&id=598800a3\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=js\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=js\"\n\nimport \"./Sidebar.vue?vue&type=style&index=0&id=598800a3&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <section class=\"frineds\">\n    <div v-if=\"routeParams === 'friendList'\" class=\"friend-list\">\n      <FriendList />\n    </div>\n\n    <div v-if=\"routeParams === 'addFriends'\" class=\"addFriends\">\n      <AddFriendList />\n    </div>\n\n    <div v-if=\"routeParams === 'friendRequests'\" class=\"friend-requests\">\n      <FriendRequestList />\n    </div>\n\n    <div v-if=\"routeParams === 'aboutMe'\" class=\"about-me\">\n      <AboutMe />\n    </div>\n\n    <ChatroomList />\n  </section>\n</template>\n\n<script>\nimport AboutMe from '@/components/Friends/AboutMe.vue';\nimport ChatroomList from '@/components/Friends/ChatroomList.vue';\nimport FriendList from '@/components/Friends/FriendList.vue';\nimport AddFriendList from '@/components/Friends/AddFriendForm.vue';\nimport FriendRequestList from '@/components/Friends/FriendRequestList.vue';\nimport SingleChatroom from '@/components/SingleChatroom';\nimport { ref } from '@vue/reactivity';\nimport { useRoute } from 'vue-router';\nimport { watch } from '@vue/runtime-core';\nimport useNestedCollection from '@/composables/useNestedCollection.js';\nimport getUser from '@/composables/getUser.js';\n\nexport default {\n  components: {\n    SingleChatroom,\n    FriendList,\n    ChatroomList,\n    AddFriendList,\n    FriendRequestList,\n    AboutMe,\n  },\n\n  setup() {\n    const route = useRoute();\n    const routeParams = ref(route.params.id);\n    const { user } = getUser();\n    const userId = user.value.uid;\n\n    watch(route, async () => {\n      toggleActiveChatroom(routeParams.value);\n      routeParams.value = route.params.id;\n    });\n\n    const toggleActiveChatroom = async params => {\n      // if (\n      //   routeParams.value !== 'addFriends' &&\n      //   routeParams.value !== 'friendList' &&\n      //   routeParams.value !== 'chatrooms' &&\n      //   routeParams.value !== 'friendRequests' &&\n      //   routeParams.value !== 'aboutMe'\n      // ) {\n      //   const { updateDoc: chatroomInfo } = useNestedCollection(\n      //     'users',\n      //     userId,\n      //     'chatrooms'\n      //   );\n      //   await chatroomInfo(params, { isActive: false });\n      // }\n    };\n\n    return { routeParams };\n  },\n};\n</script>\n\n<style>\n.category {\n  font-size: 1rem;\n  padding: 0.3em 0.5rem;\n  font-weight: 500;\n  text-align: left;\n  background-color: #444;\n  color: #ccc;\n}\n\n.frineds {\n  grid-row: 2;\n  grid-column: 1;\n  background-color: #333437;\n  color: white;\n  overflow: scroll;\n}\n\n.frineds::-webkit-scrollbar {\n  display: none;\n}\n\n.friend {\n  width: 100%;\n  background-color: inherit;\n  text-align: left;\n  cursor: pointer;\n}\n\n@media (min-width: 768px) {\n  .category {\n    padding: 0.5em 0.5rem;\n    font-size: 0.7rem;\n  }\n\n  .frineds {\n    grid-row: 2/3;\n    grid-column: 2;\n    border-right: 1px solid #464749;\n  }\n}\n</style>\n","<template>\n  <div class=\"category\">我的資料</div>\n\n  <div class=\"user-infos\" v-if=\"userInfo\">\n    <div class=\"user-info display-name\">\n      顯示名稱\n      <p @click=\"(showNameInput = !showNameInput), (showStatusInput = false)\">\n        {{ userInfo.displayName }}\n        <span class=\"material-icons\">edit</span>\n      </p>\n\n      <form @submit.enter.prevent=\"handleSubmitName\">\n        <input\n          type=\"text\"\n          v-if=\"showNameInput\"\n          v-model=\"name\"\n          placeholder=\"請輸入新名稱(十字以內)\"\n          maxlength=\"10\"\n        />\n      </form>\n    </div>\n\n    <div class=\"user-info status-message\">\n      狀態消息\n      <p @click=\"(showStatusInput = !showStatusInput), (showNameInput = false)\">\n        {{ userInfo.statusMessage }}\n        <span class=\"material-icons\"> edit </span>\n      </p>\n      <form @submit.enter.prevent=\"handleSubmitStatus\">\n        <input\n          type=\"text\"\n          v-if=\"showStatusInput\"\n          v-model=\"statusMessage\"\n          placeholder=\"請輸入新狀態(二十字以內)\"\n          maxlength=\"20\"\n        />\n      </form>\n    </div>\n\n    <div class=\"user-info user-id\">\n      用戶ID\n      <p>{{ user.uid }}</p>\n    </div>\n\n    <div class=\"user-info email\">\n      電子郵件帳號\n      <p>{{ user.email }}</p>\n    </div>\n\n    <div class=\"user-info developer\">\n      此程式開發者ID（歡迎加我好友）\n      <p>pvzcHUVscLOjoAOK0eQQxHx3qOV2</p>\n    </div>\n  </div>\n  <div v-else class=\"reminder\"><Loader /></div>\n</template>\n\n<script>\nimport { projectFirestore } from '@/firebase/config';\nimport getUser from '@/composables/getUser.js';\nimport getDocument from '@/composables/getDocument.js';\nimport useDocuments from '@/composables/useDocuments.js';\nimport useNestedCollection from '@/composables/useNestedCollection.js';\nimport { ref } from '@vue/reactivity';\nimport Loader from '@/components/Loader.vue';\n\nexport default {\n  components: { Loader },\n\n  setup() {\n    const { user } = getUser();\n    const { document: userInfo } = getDocument('users', user.value.uid);\n    const { updateDoc } = useDocuments('users', user.value.uid);\n    const showNameInput = ref(false);\n    const showStatusInput = ref(false);\n    const friendList = [];\n    const chatroomList = [];\n    const sendRequestList = [];\n    const userId = user.value.uid;\n    const name = ref('');\n    const statusMessage = ref('');\n\n    const getUserFriendList = async () => {\n      await projectFirestore\n        .collection('users')\n        .doc(user.value.uid)\n        .collection('friendList')\n        .get()\n        .then(res => res.forEach(data => friendList.push(data.data().userId)));\n    };\n\n    const getUserChatroomList = async () => {\n      await projectFirestore\n        .collection('users')\n        .doc(user.value.uid)\n        .collection('chatrooms')\n        .get()\n        .then(res =>\n          res.forEach(data =>\n            chatroomList.push([data.data().friendId, data.data().chatroomId])\n          )\n        );\n    };\n\n    const getUserSendRequestList = async () => {\n      await projectFirestore\n        .collection('users')\n        .doc(user.value.uid)\n        .collection('sentRequests')\n        .get()\n        .then(res =>\n          res.forEach(data => sendRequestList.push(data.data().userId))\n        );\n    };\n\n    // 更新使用者名稱\n\n    const handleSubmitName = async () => {\n      // 若無輸入名稱，則return\n      if (!name.value) {\n        showNameInput.value = false;\n        return;\n      }\n\n      // 更新使用者資料\n      updateDoc({ displayName: name.value });\n      showNameInput.value = false;\n\n      // 更新使用者好友之個人資料\n      await getUserFriendList();\n      friendList.forEach(friendId => {\n        const { updateDoc } = useNestedCollection(\n          'users',\n          friendId,\n          'friendList'\n        );\n        updateDoc(user.value.uid, { displayName: name.value });\n      });\n\n      // 更新使用者好友之聊天室資料\n      await getUserChatroomList();\n      chatroomList.forEach(friendInfo => {\n        const { updateDoc } = useNestedCollection(\n          'users',\n          friendInfo[0],\n          'chatrooms'\n        );\n        updateDoc(friendInfo[1], { displayName: name.value });\n      });\n\n      // 更新使用者好友之好友邀請資料\n      await getUserSendRequestList();\n      sendRequestList.forEach(sendRequest => {\n        const { updateDoc } = useNestedCollection(\n          'users',\n          sendRequest,\n          'friendRequests'\n        );\n        updateDoc(user.value.uid, { displayName: name.value });\n      });\n\n      name.value = '';\n      friendList.length = 0;\n      chatroomList.length = 0;\n      sendRequestList.length = 0;\n    };\n\n    // 更新使用者狀態\n    const handleSubmitStatus = async () => {\n      //若沒有輸入狀態，則return\n      if (!statusMessage.value) {\n        showStatusInput.value = false;\n        return;\n      }\n\n      // 更新使用者資料\n      updateDoc({ statusMessage: statusMessage.value });\n      showStatusInput.value = false;\n\n      // 更新使用者好友之個人資料\n      await getUserFriendList();\n      friendList.forEach(friendId => {\n        const { updateDoc } = useNestedCollection(\n          'users',\n          friendId,\n          'friendList'\n        );\n        updateDoc(userId, { statusMessage: statusMessage.value });\n      });\n\n      statusMessage.value = '';\n      friendList.length = 0;\n    };\n\n    return {\n      user,\n      userInfo,\n      name,\n      statusMessage,\n      showNameInput,\n      showStatusInput,\n      handleSubmitName,\n      handleSubmitStatus,\n    };\n  },\n};\n</script>\n\n<style>\n.about-me .user-infos {\n  font-size: 0.8rem;\n  display: flex;\n  flex-direction: column;\n  text-align: left;\n  padding: 5px 15px;\n  color: #aaa;\n}\n\n.about-me .user-infos p {\n  color: #ddd;\n  margin: 0.2em 0px;\n  font-weight: 700;\n  font-size: 1.2rem;\n  padding: 3px 0px 0px 0px;\n  display: flex;\n  align-items: center;\n}\n\n.about-me .user-infos .user-info {\n  border-bottom: 1px solid #555;\n  padding: 0.8em 0.4em;\n}\n\n.about-me .user-infos .display-name p:hover,\n.about-me .user-infos .status-message p:hover {\n  color: white;\n  cursor: pointer;\n}\n\n.about-me .user-infos .user-info .material-icons {\n  font-size: 1rem;\n  margin-left: 0.5em;\n}\n\n.about-me .user-infos .user-info input {\n  margin-top: 5px;\n  font: 1rem;\n  outline: none;\n  padding: 0.5em 0.8em;\n  width: 10rem;\n}\n\n.about-me .reminder {\n  color: #ddd;\n  height: 3rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n@media (min-width: 768px) {\n  .about-me .user-infos p {\n    margin: 0.1em 0px;\n    font-size: 0.9rem;\n  }\n\n  .about-me .user-infos .user-info {\n    border-bottom: 1px solid #555;\n    padding: 1em 0em;\n  }\n\n  .about-me .user-infos .display-name p:hover,\n  .about-me .user-infos .status-message p:hover {\n    color: white;\n    cursor: pointer;\n  }\n\n  .about-me .user-infos .user-info .material-icons {\n    font-size: 1rem;\n    margin-left: 0.3em;\n  }\n\n  .about-me .user-infos .user-info input {\n    margin-top: 0.4em;\n    outline: none;\n    padding: 0.3em 0.4em;\n  }\n\n  .about-me .reminder {\n    color: #ddd;\n    font-size: 0.5rem;\n  }\n}\n</style>\n","import { ref } from 'vue';\nimport { projectFirestore } from '../firebase/config';\n\nconst useDocument = (collection, id, collection2) => {\n  const error = ref(null);\n  const isPending = ref(false);\n\n  let docRef = projectFirestore\n    .collection(collection)\n    .doc(id)\n    .collection(collection2);\n\n  const addDoc = async data => {\n    isPending.value = true;\n    error.value = null;\n    try {\n      docRef.add(data);\n    } catch (err) {\n      console.log(err.message);\n      error.value = '無法新增資料，請再試一次';\n      isPending.value = false;\n    }\n  };\n\n  const deleteDoc = async id => {\n    isPending.value = true;\n    error.value = null;\n    try {\n      const res = await docRef.doc(id).delete();\n      isPending.value = false;\n      return res;\n    } catch (err) {\n      console.log(err.message);\n      error.value = '無法刪除資料，請再試一次';\n      isPending.value = false;\n    }\n  };\n\n  const updateDoc = async (id, updates) => {\n    isPending.value = true;\n    error.value = null;\n    try {\n      const res = await docRef.doc(id).update(updates);\n      isPending.value = false;\n      return res;\n    } catch (err) {\n      console.log(err.message);\n      error.value = '無法更新資料，請再試一次';\n      isPending.value = false;\n    }\n  };\n\n  const addDocWithId = async (id, doc) => {\n    error.value = null;\n    try {\n      const res = await docRef.doc(id).set(doc);\n      isPending.value = false;\n\n      return res;\n    } catch (err) {\n      console.log(err.message);\n      error.value = 'could not send the message';\n    }\n  };\n\n  return {\n    error,\n    isPending,\n    document,\n    deleteDoc,\n    updateDoc,\n    addDoc,\n    addDocWithId,\n  };\n};\n\nexport default useDocument;\n","<template>\n  <div class=\"loader\"></div>\n</template>\n\n<script>\nexport default {};\n</script>\n\n<style>\n.loader {\n  border: 3px solid #f3f3f3; /* Light grey */\n  border-top: 3px solid #777; /* Blue */\n  border-radius: 50%;\n  width: 2em;\n  height: 2em;\n  animation: spin 2s linear infinite;\n}\n\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n</style>\n","import { render } from \"./Loader.vue?vue&type=template&id=691a2f68\"\nimport script from \"./Loader.vue?vue&type=script&lang=js\"\nexport * from \"./Loader.vue?vue&type=script&lang=js\"\n\nimport \"./Loader.vue?vue&type=style&index=0&id=691a2f68&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./AboutMe.vue?vue&type=template&id=4b9a9b4a\"\nimport script from \"./AboutMe.vue?vue&type=script&lang=js\"\nexport * from \"./AboutMe.vue?vue&type=script&lang=js\"\n\nimport \"./AboutMe.vue?vue&type=style&index=0&id=4b9a9b4a&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div\n    class=\"chatrooms\"\n    v-if=\"\n      routeParams !== 'friendList' &&\n      routeParams !== 'addFriends' &&\n      routeParams !== 'friendRequests' &&\n      routeParams !== 'aboutMe'\n    \"\n  >\n    <div class=\"category\">聊天室</div>\n    <div v-if=\"formattedChatroomList?.length > 0\">\n      <div v-for=\"chatroom in formattedChatroomList\" :key=\"chatroom.chatroomId\">\n        <div\n          v-if=\"chatroom\"\n          class=\"friend\"\n          :class=\"{\n            active: chatroom.isActive,\n          }\"\n          @click=\"handleClick(chatroom?.chatroomId)\"\n        >\n          <div class=\"infos\">\n            <p class=\"display-name\">{{ chatroom.displayName }}</p>\n            <p class=\"dialog\">{{ chatroom.dialog }}</p>\n          </div>\n          <p class=\"lastInteractTime\">{{ chatroom.lastInteractAt }}</p>\n          <p :class=\"{ isRead: !chatroom.isRead }\">\n            {{ chatroom.isRead ? '' : '新訊息' }}\n          </p>\n        </div>\n      </div>\n    </div>\n    <div class=\"reminder\" v-else-if=\"formattedChatroomList?.length === 0\">\n      請點選好友，開啟專屬聊天室\n    </div>\n    <div v-else class=\"reminder\"><Loader /></div>\n  </div>\n</template>\n\n<script>\nimport { useRoute, useRouter } from 'vue-router';\nimport { computed, ref } from '@vue/reactivity';\nimport { watchEffect } from '@vue/runtime-core';\nimport Loader from '@/components/Loader.vue';\n\nimport getNestedCollection from '@/composables/getNestedCollection.js';\nimport useNestedCollection from '@/composables/useNestedCollection.js';\nimport useDocuments from '@/composables/useDocuments';\n\nimport getUser from '@/composables/getUser.js';\n\nimport intlFormat from 'date-fns/intlFormat';\nimport fromUnixTime from 'date-fns/fromUnixTime';\nimport { projectFirestore } from '@/firebase/config';\n\nexport default {\n  components: { Loader },\n\n  setup() {\n    const router = useRouter();\n    const route = useRoute();\n    const routeParams = ref(route.params.id);\n    const { user } = getUser();\n    const timeArr = [];\n    const userId = user.value.uid;\n    const { updateDoc: updateUserInfo } = useDocuments('users', userId);\n\n    let { documents } = getNestedCollection(\n      'users',\n      userId,\n      'chatrooms',\n      ['chatroomOrder', 'desc'],\n      ['isDisplay', '==', true]\n    );\n\n    let formattedChatroomList = computed(() => {\n      if (documents.value) {\n        return documents.value.map(friend => {\n          if (friend.lastInteractAt) {\n            let time = intlFormat(fromUnixTime(friend.lastInteractAt), {\n              hour: 'numeric',\n              minute: 'numeric',\n            });\n            updateUserInfo({ messageIsRead: true });\n\n            return { ...friend, lastInteractAt: time };\n          } else {\n            let time = intlFormat(fromUnixTime(new Date().getTime() / 1000), {\n              hour: 'numeric',\n              minute: 'numeric',\n            });\n\n            timeArr.length = 0;\n            timeArr.push(time);\n            updateUserInfo({ messageIsRead: true });\n\n            return { ...friend, lastInteractAt: timeArr[0] };\n          }\n        });\n      }\n    });\n\n    watchEffect(() => {\n      routeParams.value = route.params.id;\n    });\n\n    const handleClick = async chatroomId => {\n      await projectFirestore\n        .collection('users')\n        .doc(userId)\n        .collection('chatrooms')\n        .where('isActive', '==', true)\n        ?.get()\n        .then(res =>\n          res.forEach(doc => {\n            console.log('hi');\n\n            doc.ref.update({ isActive: false });\n          })\n        );\n\n      const { updateDoc } = useNestedCollection('users', userId, 'chatrooms');\n\n      await router.push({ name: 'Chatroom', params: { id: chatroomId } });\n      await updateDoc(routeParams.value, { isActive: true });\n    };\n    return { handleClick, routeParams, formattedChatroomList };\n  },\n};\n</script>\n\n<style>\n.chatrooms .friend {\n  height: 5rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n}\n\n.chatrooms .friend:hover,\n.chatrooms .friend.active {\n  background-color: #3d3e40;\n}\n\n.chatrooms .infos {\n  padding: 0px 1em 0px 1em;\n  justify-content: center;\n  align-items: center;\n}\n\n.chatrooms .display-name {\n  font-size: 1.2rem;\n  font-weight: 700;\n}\n\n.chatrooms .dialog {\n  font-size: 0.8rem;\n  color: #999;\n  max-height: 2.6rem;\n  width: 15rem;\n  line-height: 1.3rem;\n  overflow: hidden;\n}\n\n.chatrooms .isRead {\n  font-size: 0.8rem;\n  color: white;\n  background: #ee525c;\n  overflow: hidden;\n  font-weight: 700;\n  padding: 0.3em;\n  border-radius: 0.5em;\n  position: absolute;\n  right: 1rem;\n  bottom: 1rem;\n  text-align: center;\n}\n\n.chatrooms .lastInteractTime {\n  font-size: 0.8rem;\n  color: #777;\n  position: absolute;\n  right: 1rem;\n  top: 1rem;\n  word-break: keep-all;\n}\n\n.chatrooms .reminder {\n  color: #ddd;\n  height: 3rem;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n@media (min-width: 768px) {\n  .chatrooms .dialog {\n    width: 10rem;\n  }\n\n  .chatrooms .isRead {\n    font-size: 0.5rem;\n    width: 5em;\n    color: white;\n    padding: 0.35em;\n    border-radius: 1.2em;\n    right: 1.4em;\n    bottom: 2em;\n  }\n\n  .chatrooms .lastInteractTime {\n    right: 0.8em;\n    top: 1.2em;\n  }\n\n  .chatrooms .reminder {\n    color: #ddd;\n    font-size: 0.5rem;\n  }\n}\n</style>\n","import { ref, watchEffect } from 'vue';\nimport { projectFirestore } from '../firebase/config';\n\nconst getCollection = (collection, id, collection2, orderBy, query) => {\n  const documents = ref(null);\n  const error = ref(null);\n  // register the firestore collection reference\n  let collectionRef = projectFirestore\n    .collection(collection)\n    .doc(id)\n    .collection(collection2);\n\n  if (orderBy) {\n    collectionRef = collectionRef.orderBy(...orderBy);\n  }\n\n  if (query) {\n    collectionRef = collectionRef.where(...query);\n  }\n\n  const unsub = collectionRef.onSnapshot(\n    async snap => {\n      let results = [];\n\n      snap.docs.forEach(async doc => {\n        if (orderBy) {\n          doc.data()[orderBy[0]] &&\n            results.push({\n              ...doc.data(),\n              id: doc.id,\n            });\n        } else {\n          results.push({\n            ...doc.data(),\n            id: doc.id,\n          });\n        }\n      });\n      documents.value = results;\n\n      error.value = null;\n    },\n    err => {\n      console.log(err.message);\n      documents.value = null;\n      error.value = 'could not fetch dada';\n    }\n  );\n\n  watchEffect(onInvalidate => {\n    // unsub from prev collection when watcher is stopped(component unmounted)\n    onInvalidate(() => unsub());\n  });\n\n  return { documents, error };\n};\n\nexport default getCollection;\n","import { render } from \"./ChatroomList.vue?vue&type=template&id=fe1ea4d6\"\nimport script from \"./ChatroomList.vue?vue&type=script&lang=js\"\nexport * from \"./ChatroomList.vue?vue&type=script&lang=js\"\n\nimport \"./ChatroomList.vue?vue&type=style&index=0&id=fe1ea4d6&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <p class=\"category\">自己</p>\n  <div class=\"friend\" v-if=\"userInfo\">\n    <div class=\"infos\">\n      <p class=\"display-name\">{{ userInfo.displayName }}</p>\n      <p class=\"statusMessage\">{{ userInfo.statusMessage }}</p>\n    </div>\n  </div>\n\n  <p class=\"category\">好友列表</p>\n  <div v-if=\"friendList?.length > 0\">\n    <div\n      class=\"friend\"\n      v-for=\"friend in friendList\"\n      :key=\"friend.chatroomId\"\n      @click=\"handleClick(friend.chatroomId)\"\n    >\n      <div class=\"infos\">\n        <p class=\"display-name\">{{ friend.displayName }}</p>\n        <p class=\"statusMessage\">{{ friend.statusMessage }}</p>\n      </div>\n    </div>\n  </div>\n  <div v-else-if=\"friendList?.length === 0\" class=\"reminder\">請先新增好友</div>\n  <div v-else class=\"reminder\"><Loader /></div>\n</template>\n\n<script>\nimport { useRouter } from 'vue-router';\nimport useNestedCollection from '@/composables/useNestedCollection.js';\nimport getNestedCollection from '@/composables/getNestedCollection.js';\nimport getUser from '@/composables/getUser.js';\nimport getDocument from '@/composables/getDocument.js';\nimport Loader from '@/components/Loader.vue';\n\nexport default {\n  components: { Loader },\n  setup() {\n    const router = useRouter();\n    const { user } = getUser();\n    const userDisplayName = user.value.displayName;\n    const { document: userInfo } = getDocument('users', user.value.uid);\n    const { documents: friendList, error } = getNestedCollection(\n      'users',\n      user.value.uid,\n      'friendList'\n    );\n    const userId = user.value.uid;\n    const handleClick = async chatroomId => {\n      if (!user.value) return;\n\n      router.push({ name: 'Chatroom', params: { id: chatroomId } });\n\n      const { updateDoc } = useNestedCollection(\n        'users',\n        user.value.uid,\n        'chatrooms'\n      );\n\n      const updateChatroomDisplay = useNestedCollection(\n        'users',\n        user.value.uid,\n        'chatrooms'\n      ).updateDoc;\n\n      await updateChatroomDisplay(chatroomId, { isDisplay: true });\n      await updateDoc(chatroomId, { isActive: true });\n    };\n    return {\n      handleClick,\n      userDisplayName,\n      userInfo,\n      friendList,\n      error,\n      Loader,\n    };\n  },\n};\n</script>\n\n<style>\n.friend-list .friend {\n  height: 5rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n}\n\n.friend-list .infos {\n  padding: 0px 1em 0px 1em;\n  justify-content: center;\n  align-items: center;\n}\n\n.friend-list .friend:hover {\n  background-color: #3d3e40;\n}\n\n.friend-list .friend .display-name {\n  font-size: 1.2rem;\n  font-weight: 700;\n}\n\n.friend-list .friend .statusMessage {\n  font-size: 0.8rem;\n  color: #999;\n  line-height: 0.8rem;\n  overflow: hidden;\n}\n\n.friend-list .reminder {\n  height: 3rem;\n  color: #ddd;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n@media (min-width: 768px) {\n  .friend-list .friend .statusMessage {\n    height: 1.3rem;\n    line-height: 1.3rem;\n  }\n\n  .friend-list .reminder {\n    color: #ddd;\n    font-size: 0.5rem;\n  }\n}\n</style>\n","import { render } from \"./FriendList.vue?vue&type=template&id=05adbc7d\"\nimport script from \"./FriendList.vue?vue&type=script&lang=js\"\nexport * from \"./FriendList.vue?vue&type=script&lang=js\"\n\nimport \"./FriendList.vue?vue&type=style&index=0&id=05adbc7d&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"category\">加入好友</div>\n\n  <form @submit.enter.prevent=\"handleSubmit(userId)\">\n    <input placeholder=\"請輸入用戶ID\" v-model=\"userId\" />\n    <span class=\"material-icons\"> search </span>\n  </form>\n\n  <div class=\"userInfo\">\n    <div class=\"display-name\" v-if=\"document\">\n      {{ document.displayName }}\n    </div>\n\n    <div class=\"error\" v-if=\"error\">\n      {{ error }}\n    </div>\n\n    <button @click=\"handleClick(userId)\" v-if=\"buttonText\">\n      {{ buttonText }}\n    </button>\n  </div>\n</template>\n\n<script>\nimport { ref } from '@vue/reactivity';\nimport { projectFirestore } from '@/firebase/config';\nimport useNestedCollection from '@/composables/useNestedCollection.js';\nimport getUser from '@/composables/getUser.js';\nimport { watchEffect } from '@vue/runtime-core';\nimport useDocuments from '@/composables/useDocuments';\n\nexport default {\n  setup() {\n    const userId = ref();\n    const buttonText = ref();\n    const document = ref();\n    const error = ref();\n    const userInfo = [];\n    const userFriendList = [];\n    const sendRequestList = [];\n    const { user } = getUser();\n\n    const handleSubmit = async id => {\n      if (!id) return;\n\n      id = id.trim();\n\n      // 取得使用者寄出的好友邀請列表\n      await projectFirestore\n        .collection('users')\n        .doc(user.value.uid)\n        .collection('sentRequests')\n        .get()\n        .then(res =>\n          res.forEach(data => sendRequestList.push(data.data().userId))\n        );\n\n      await projectFirestore\n        .collection('users')\n        .doc(user.value.uid)\n        .collection('friendList')\n        .get()\n        .then(res => {\n          res.forEach(doc => {\n            userFriendList.push(doc.data().userId);\n          });\n        });\n\n      const friendInfo = await projectFirestore\n        .collection('users')\n        .doc(id)\n        .get()\n        .then(doc => {\n          return doc;\n        });\n\n      // 1) 使用者寄出好友邀請包含輸入之ID\n      if (sendRequestList.includes(id)) {\n        document.value = friendInfo.data();\n        error.value = '您已寄出過邀請囉！請等待對方回覆';\n        userId.value = '';\n        sendRequestList.length = 0;\n        userFriendList.length = 0;\n        return;\n      }\n\n      // 2) 使用者好友名單包含輸入之ID\n      if (userFriendList.includes(id)) {\n        document.value = friendInfo.data();\n        error.value = '你們已是好友囉！';\n        userId.value = '';\n        sendRequestList.length = 0;\n        userFriendList.length = 0;\n        return;\n      }\n\n      // 3) 輸入之ID為使用者之ID\n      if (id === user.value.uid) {\n        document.value = friendInfo.data();\n        error.value = '這是您自己哦！';\n        userId.value = '';\n        sendRequestList.length = 0;\n        userFriendList.length = 0;\n        return;\n      }\n\n      if (friendInfo.exists) {\n        error.value = '';\n        buttonText.value = '加入';\n        document.value = friendInfo.data();\n        sendRequestList.length = 0;\n        userFriendList.length = 0;\n      } else {\n        error.value = 'Oops...查無此ID';\n        document.value = '';\n        buttonText.value = '';\n        userId.value = '';\n        sendRequestList.length = 0;\n        userFriendList.length = 0;\n      }\n    };\n\n    // 新增好友按鈕\n\n    const handleClick = async id => {\n      const userRequest = {\n        displayName: userInfo[0].displayName,\n        userId: userInfo[0].userId,\n      };\n\n      const { updateDoc: updateUserInfo } = useDocuments('users', id);\n\n      await useNestedCollection('users', id, 'friendRequests').addDocWithId(\n        user.value.uid,\n        userRequest\n      );\n\n      await useNestedCollection(\n        'users',\n        user.value.uid,\n        'sentRequests'\n      ).addDocWithId(id, { userId: id });\n\n      await updateUserInfo({ requestIsRead: false });\n\n      userId.value = '';\n      document.value = '';\n      buttonText.value = '';\n      userInfo.length = 0;\n    };\n\n    watchEffect(async () => {\n      if (!user.value) return;\n\n      await projectFirestore\n        .collection('users')\n        .doc(user.value.uid)\n        .get()\n        .then(doc => {\n          userInfo.push(doc.data());\n        });\n    });\n\n    return {\n      userId,\n      handleSubmit,\n      document,\n      error,\n      buttonText,\n      handleClick,\n    };\n  },\n};\n</script>\n\n<style>\n.addFriends {\n  height: 100%;\n}\n\n.addFriends form {\n  height: 4em;\n  display: flex;\n  position: relative;\n  align-items: center;\n}\n\n.addFriends input {\n  font-size: 1rem;\n  background-color: #f5f5f5;\n  width: calc(100% - 6em);\n  height: 1.3em;\n  padding: 0.3em 0.3em 0.3em 2em;\n  outline: none;\n  border: 0.1em solid #eceff2;\n  border-radius: 0.3em;\n  margin: 1em auto;\n}\n\n.addFriends .material-icons {\n  font-size: 2rem;\n  position: absolute;\n  top: 0.5em;\n  left: 0.9em;\n  color: #333;\n}\n\n.addFriends .material-icons:hover {\n  cursor: default;\n}\n\n.addFriends button {\n  padding: 0.5em;\n  width: 4em;\n  font-size: 1rem;\n}\n\n.addFriends .userInfo {\n  height: calc(100% - 5.6em);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5em;\n}\n\n.addFriends .display-name {\n  font-size: 2rem;\n}\n\n@media (min-width: 768px) {\n  .addFriends input {\n    font-size: 0.8rem;\n    width: calc(100% - 4em);\n    padding: 0.3em 0.3em 0.3em 2em;\n  }\n\n  .addFriends .material-icons {\n    font-size: 1.5rem;\n    top: 1.25rem;\n    left: 0.8rem;\n  }\n\n  .addFriends button {\n    padding: 0.5em;\n    width: 4em;\n  }\n\n  .addFriends .display-name {\n    font-size: 1.5rem;\n  }\n}\n</style>\n","import { render } from \"./AddFriendForm.vue?vue&type=template&id=587f0748\"\nimport script from \"./AddFriendForm.vue?vue&type=script&lang=js\"\nexport * from \"./AddFriendForm.vue?vue&type=script&lang=js\"\n\nimport \"./AddFriendForm.vue?vue&type=style&index=0&id=587f0748&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <p class=\"category\">好友邀請</p>\n\n  <div\n    v-if=\"\n      routeParams !== 'friendList' &&\n      routeParams !== 'addFriends' &&\n      routeParams !== 'chatrooms' &&\n      routeParams !== 'aboutMe' &&\n      requests?.length > 0\n    \"\n  >\n    <div class=\"request\" v-for=\"request in requests\" :key=\"request.userId\">\n      <p class=\"display-name\">{{ request.displayName }}</p>\n      <div class=\"buttons\">\n        <button class=\"delete\" @click=\"handleDelete(request.userId)\">\n          刪除\n        </button>\n        <button\n          class=\"accept\"\n          @click=\"handleAccept(request.userId, request.displayName)\"\n        >\n          接受\n        </button>\n      </div>\n    </div>\n  </div>\n\n  <div v-else-if=\"requests?.length === 0\" class=\"reminder\">\n    目前尚無好友邀請\n  </div>\n\n  <div v-else class=\"reminder\"><Loader /></div>\n</template>\n\n<script>\nimport { computed, ref } from '@vue/reactivity';\nimport { useRoute } from 'vue-router';\nimport { watch } from '@vue/runtime-core';\nimport { timestamp } from '@/firebase/config.js';\nimport { projectFirestore } from '@/firebase/config';\nimport Loader from '@/components/Loader.vue';\n\nimport getNestedCollection from '@/composables/getNestedCollection.js';\nimport useNestedCollection from '@/composables/useNestedCollection.js';\nimport useCollection from '@/composables/useCollection';\nimport getUser from '@/composables/getUser.js';\nimport useDocuments from '@/composables/useDocuments';\n\nexport default {\n  components: { Loader },\n\n  setup() {\n    const randomstring = require('randomstring');\n    const route = useRoute();\n    const routeParams = ref(route.params.id);\n    const userInfo = [];\n    const friendInfo = [];\n    const { user } = getUser();\n    const userId = user.value.uid;\n    const { updateDoc: updateUserInfo } = useDocuments('users', userId);\n\n    const { documents } = getNestedCollection(\n      'users',\n      user.value.uid,\n      'friendRequests'\n    );\n\n    const requests = computed(() => {\n      if (documents.value) {\n        updateUserInfo({ requestIsRead: true });\n        return documents.value;\n      }\n    });\n\n    watch(route, async () => {\n      routeParams.value = route.params.id;\n    });\n\n    // 刪除好友按鈕\n    const handleDelete = async id => {\n      // 刪除收到的好友邀請\n      useNestedCollection('users', user.value.uid, 'friendRequests').deleteDoc(\n        id\n      );\n      // 刪除寄出的好友邀請\n      useNestedCollection('users', id, 'sentRequests').deleteDoc(\n        user.value.uid\n      );\n    };\n\n    // 接受好友按鈕\n    const handleAccept = async id => {\n      const randomId = await randomstring.generate(20);\n\n      // 更新使用者資料\n      await projectFirestore\n        .collection('users')\n        .doc(user.value.uid)\n        .get()\n        .then(doc => {\n          userInfo.push(doc.data());\n        });\n\n      // 更新好友資料\n      await projectFirestore\n        .collection('users')\n        .doc(id)\n        .get()\n        .then(doc => {\n          friendInfo.push(doc.data());\n        });\n\n      // 新增共用聊天室及其資料\n      const chatroomData = {\n        chatroomId: randomId,\n        usersId: [id, user.value.uid],\n      };\n      useCollection('chatrooms').addDocWithId(randomId, chatroomData);\n\n      // 邀請者個人聊天室資料\n      const inviterChatroomData = {\n        chatroomId: randomId,\n        displayName: friendInfo[0].displayName,\n        friendId: friendInfo[0].userId,\n        lastInteractAt: timestamp(),\n        chatroomOrder: timestamp(),\n        lastRead: timestamp(),\n        isActive: false,\n        isDisplay: false,\n        isRead: true,\n      };\n\n      // 邀請者好友列表資料\n      const inviterFriendListData = {\n        chatroomId: randomId,\n        userId: friendInfo[0].userId,\n        displayName: friendInfo[0].displayName,\n        statusMessage: friendInfo[0].statusMessage,\n      };\n\n      // 接收者個人聊天室資料\n      const reciverChatroomData = {\n        chatroomId: randomId,\n        lastInteractAt: timestamp(),\n        chatroomOrder: timestamp(),\n        lastRead: timestamp(),\n        displayName: userInfo[0].displayName,\n        friendId: userInfo[0].userId,\n        isDisplay: false,\n        isRead: true,\n        isActive: false,\n      };\n\n      // 接收者好友列表資料\n      const reciverFriendListData = {\n        chatroomId: randomId,\n        userId: userInfo[0].userId,\n        displayName: userInfo[0].displayName,\n        statusMessage: userInfo[0].statusMessage,\n      };\n\n      // 新增個人聊天室doc（接收者）\n      await useNestedCollection(\n        'users',\n        userInfo[0].userId,\n        'chatrooms'\n      ).addDocWithId(randomId, inviterChatroomData);\n\n      // 新增個人聊天室doc（邀請者）\n      await useNestedCollection(\n        'users',\n        friendInfo[0].userId,\n        'chatrooms'\n      ).addDocWithId(randomId, reciverChatroomData);\n\n      // 新增好友列表doc（邀請者）\n      await useNestedCollection(\n        'users',\n        userInfo[0].userId,\n        'friendList'\n      ).addDocWithId(friendInfo[0].userId, inviterFriendListData);\n\n      // 新增好友列表doc（接收者）\n      await useNestedCollection(\n        'users',\n        friendInfo[0].userId,\n        'friendList'\n      ).addDocWithId(userInfo[0].userId, reciverFriendListData);\n\n      // 刪除寄出的好友邀請\n      await useNestedCollection(\n        'users',\n        userInfo[0].userId,\n        'friendRequests'\n      ).deleteDoc(friendInfo[0].userId);\n\n      // 刪除收到的好友邀請\n      await useNestedCollection(\n        'users',\n        friendInfo[0].userId,\n        'sentRequests'\n      ).deleteDoc(userInfo[0].userId);\n\n      friendInfo.length = 0;\n      userInfo.length = 0;\n    };\n\n    return { routeParams, requests, handleDelete, handleAccept };\n  },\n};\n</script>\n\n<style>\n.friend-requests .request:hover {\n  background-color: #3d3e40;\n}\n\n.friend-requests .request {\n  height: 4rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.friend-requests button {\n  margin-right: 1em;\n  padding: 0.5em 1em;\n}\n\n.friend-requests .delete {\n  background-color: #333;\n  border: 1px solid #bbb;\n}\n\n.friend-requests .delete:hover {\n  background-color: #444;\n}\n\n.friend-requests .display-name {\n  font-size: 1.2rem;\n  text-align: left;\n  padding: 0px 1em 0px 1em;\n  font-weight: 700;\n}\n.friend-requests .reminder {\n  color: #ddd;\n  height: 3rem;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n@media (min-width: 768px) {\n  .friend-requests .reminder {\n    margin-top: 0.5rem;\n    color: #ddd;\n    font-size: 0.5rem;\n  }\n}\n</style>\n","import { render } from \"./FriendRequestList.vue?vue&type=template&id=a550d90c\"\nimport script from \"./FriendRequestList.vue?vue&type=script&lang=js\"\nexport * from \"./FriendRequestList.vue?vue&type=script&lang=js\"\n\nimport \"./FriendRequestList.vue?vue&type=style&index=0&id=a550d90c&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <main\n    :class=\"{ showSingleChatroom: showSingleChatroom }\"\n    class=\"single-chatroom\"\n  >\n    <div v-if=\"routeParams === 'friendList'\" class=\"reminder\">\n      <p>點選好友<br />進入專屬聊天室</p>\n    </div>\n\n    <div v-else-if=\"routeParams === 'addFriends'\" class=\"reminder\">\n      <p>輸入用戶ID<br />並加入好友</p>\n    </div>\n\n    <div v-else-if=\"routeParams === 'friendRequests'\" class=\"reminder\">\n      <p>接受/刪除好友邀請</p>\n    </div>\n\n    <div v-else-if=\"routeParams === 'aboutMe'\" class=\"reminder\">\n      <p>個人資料設定</p>\n    </div>\n\n    <div v-else-if=\"routeParams === 'chatrooms'\" class=\"reminder\">\n      <p>點選左方聊天室 <br />方可開始聊天</p>\n    </div>\n\n    <div v-else class=\"chat-window\">\n      <displayName />\n      <messages />\n      <newChatForm />\n    </div>\n  </main>\n</template>\n\n<script>\nimport { ref } from '@vue/reactivity';\nimport displayName from '@/components/SingleChatroom/displayName.vue';\nimport messages from '@/components/SingleChatroom/messages.vue';\nimport newChatForm from '@/components/SingleChatroom/newChatForm.vue';\nimport { useRoute } from 'vue-router';\nimport { watchEffect } from '@vue/runtime-core';\nimport useBreakpoints from '@/composables/useBreakPoints';\nexport default {\n  components: {\n    displayName,\n    messages,\n    newChatForm,\n  },\n\n  setup() {\n    const routeParams = ref('');\n    const route = useRoute();\n    const showSingleChatroom = ref(false);\n    const { width } = useBreakpoints();\n\n    const pages = [\n      'friendList',\n      'chatrooms',\n      'addFriends',\n      'friendRequests',\n      'aboutMe',\n    ];\n\n    watchEffect(() => {\n      routeParams.value = route.params.id;\n      if (width.value < 768) {\n        if (!pages.includes(routeParams.value)) {\n          showSingleChatroom.value = true;\n        } else {\n          showSingleChatroom.value = false;\n        }\n      } else {\n        showSingleChatroom.value = false;\n      }\n    });\n\n    return { routeParams, showSingleChatroom };\n  },\n};\n</script>\n\n<style>\n.single-chatroom {\n  background-color: #333437;\n  grid-row: 2;\n  grid-column: 2;\n  color: white;\n  height: 100%;\n  z-index: 2;\n}\n\n.single-chatroom.showSingleChatroom {\n  grid-column: 1;\n}\n\n.single-chatroom .chat-window {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.single-chatroom .reminder {\n  height: 100%;\n  display: flex;\n}\n\n.single-chatroom .reminder p {\n  color: #888;\n  font-size: 1.5rem;\n  font-weight: 700;\n  height: 100vh - 8rem;\n  margin: auto auto;\n}\n\n@media (min-width: 768px) {\n  .single-chatroom {\n    grid-row: 2;\n    grid-column: 3;\n    z-index: 1;\n  }\n}\n</style>\n","<template>\n  <div class=\"displayName\" v-if=\"formattedChatroomList\">\n    <div v-for=\"chatroom in formattedChatroomList\" :key=\"chatroom.chatroomId\">\n      <p>{{ chatroom.displayName }}</p>\n    </div>\n  </div>\n  <div v-else></div>\n</template>\n\n<script>\nimport getNestedCollection from '@/composables/getNestedCollection.js';\nimport getUser from '@/composables/getUser.js';\nimport { computed } from '@vue/reactivity';\n\nexport default {\n  setup() {\n    const { user } = getUser();\n\n    let chatroomData = getNestedCollection(\n      'users',\n      user.value.uid,\n      'chatrooms',\n      '',\n      ['isActive', '==', true]\n    ).documents;\n\n    let formattedChatroomList = computed(() => {\n      if (chatroomData.value?.length > 0) {\n        return chatroomData.value.map(chatroom => {\n          return chatroom;\n        });\n      }\n    });\n\n    return { formattedChatroomList };\n  },\n};\n</script>\n\n<style>\n.single-chatroom .displayName {\n  text-align: left;\n  padding: 0.5em 0.5em;\n  border-bottom: 1px solid #464749;\n  font-size: 1.5rem;\n  font-weight: 900;\n  flex-shrink: 0;\n}\n@media (min-width: 768px) {\n  .single-chatroom .displayName {\n    padding: 0.8rem;\n    font-size: 1.5rem;\n    font-weight: 900;\n  }\n}\n</style>\n","import { render } from \"./displayName.vue?vue&type=template&id=41637e34\"\nimport script from \"./displayName.vue?vue&type=script&lang=js\"\nexport * from \"./displayName.vue?vue&type=script&lang=js\"\n\nimport \"./displayName.vue?vue&type=style&index=0&id=41637e34&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"messages\" v-if=\"routeParams\" ref=\"messages\">\n    <div\n      class=\"message\"\n      :class=\"{\n        friendMessage: message.userId !== user?.uid,\n        myMessage: message.userId === user?.uid,\n      }\"\n      v-for=\"message in formattedMessages()\"\n      :key=\"message.id\"\n    >\n      <div class=\"message-info\">\n        <p class=\"is-read\">\n          {{ message.isRead ? '已讀' : '' }}\n        </p>\n        <p class=\"created-at\">\n          {{ message.createdAt }}\n        </p>\n      </div>\n\n      <p class=\"content\">\n        {{ message.message }}\n      </p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport getUser from '@/composables/getUser';\nimport useNestedCollection from '@/composables/useNestedCollection.js';\nimport getNestedCollection from '@/composables/getNestedCollection.js';\n\nimport intlFormat from 'date-fns/intlFormat';\nimport fromUnixTime from 'date-fns/fromUnixTime';\n\nimport { onUpdated, ref, watchEffect } from '@vue/runtime-core';\nimport { useRoute } from 'vue-router';\nimport { timestamp } from '@/firebase/config';\nimport { projectFirestore } from '@/firebase/config';\n\nexport default {\n  setup() {\n    const { user } = getUser();\n    const route = useRoute();\n    const routeParams = ref('');\n    const messages = ref(null);\n    let chatroomMessages = ref('');\n    const chatroomList = [];\n    const userId = ref(user.value.uid);\n\n    const getChatroomInfo = async () => {\n      await projectFirestore\n        .collection('users')\n        .doc(user.value.uid)\n        .collection('chatrooms')\n        .doc(route.params.id)\n        .get()\n        .then(res =>\n          chatroomList.push({\n            lastRead: res.data().lastRead.seconds,\n            lastInteractAt: res.data().lastInteractAt.seconds,\n          })\n        );\n    };\n\n    const formattedMessages = () => {\n      if (chatroomMessages.value) {\n        return chatroomMessages.value.map(msg => {\n          let time = intlFormat(fromUnixTime(msg.createdAt), {\n            hour: 'numeric',\n            minute: 'numeric',\n          });\n\n          projectFirestore\n            .collection('chatrooms')\n            .doc(routeParams.value)\n            .collection('messages')\n            .where('isRead', '==', false)\n            .where('userId', '!=', userId.value)\n            .get()\n            .then(res => {\n              res.forEach(doc => {\n                doc.ref.update({\n                  isRead: true,\n                });\n              });\n            });\n\n          return { ...msg, createdAt: time };\n        });\n      }\n    };\n\n    watchEffect(async () => {\n      if (!user.value) return;\n\n      if (\n        route.params.id === 'friendList' ||\n        route.params.id === 'addFriends' ||\n        route.params.id === 'friendRequests' ||\n        route.params.id === 'chatrooms' ||\n        route.params.id === 'aboutMe' ||\n        !route.params.id\n      )\n        return;\n      routeParams.value = route.params.id;\n\n      chatroomMessages = getNestedCollection(\n        'chatrooms',\n        routeParams.value,\n        'messages',\n        ['createdAt']\n      ).documents;\n\n      // 載入聊天室，聊天室狀態變更成已讀\n      const { updateDoc } = useNestedCollection(\n        'users',\n        user.value.uid,\n        'chatrooms'\n      );\n\n      // 載入聊天室，已讀所有訊息\n      await projectFirestore\n        .collection('chatrooms')\n        .doc(routeParams.value)\n        .collection('messages')\n        .where('isRead', '==', false)\n        .where('userId', '!=', userId.value)\n        .get()\n        .then(res => {\n          res.forEach(doc => {\n            doc.ref.update({\n              isRead: true,\n            });\n          });\n        });\n\n      await getChatroomInfo();\n      await updateDoc(routeParams.value, {\n        isRead: true,\n        lastRead: timestamp(),\n      });\n    });\n\n    onUpdated(() => {\n      if (messages.value) {\n        messages.value.scrollTop = messages.value.scrollHeight;\n      }\n    });\n\n    return { user, formattedMessages, routeParams, messages };\n  },\n};\n</script>\n\n<style>\n.messages {\n  padding: 0.8em;\n  flex-grow: 1;\n  flex-shrink: 1;\n  overflow: scroll;\n  display: flex;\n  flex-direction: column;\n}\n\n.messages::-webkit-scrollbar {\n  display: none;\n}\n\n.messages .message {\n  height: auto;\n  max-width: 22em;\n  font-size: 1rem;\n  overflow: visible;\n  word-break: break-all;\n  word-wrap: break-word;\n  display: flex;\n  padding: 0.4em 0em;\n  align-items: flex-end;\n}\n\n.messages .message.myMessage {\n  align-self: flex-end;\n}\n\n.messages .message.friendMessage {\n  align-self: flex-start;\n  flex-direction: row-reverse;\n}\n\n.messages .message.myMessage .content {\n  background: #fea634;\n  width: auto;\n  color: #444;\n  padding: 0.5em;\n  margin: 0px 0px 0px 0.5em;\n  text-align: left;\n}\n\n.messages .message.friendMessage .content {\n  background: #444;\n  width: auto;\n  color: white;\n  padding: 0.5em;\n  margin: 0px 0.5em 0px 0px;\n  text-align: left;\n}\n\n.messages .message.friendMessage .content {\n  background: #444;\n  width: auto;\n  color: white;\n}\n\n.messages .message .content {\n  border-radius: 0.6em;\n}\n\n.messages .message.myMessage .is-read {\n  color: #777;\n  font-size: 0.6rem;\n}\n\n.messages .message.friendMessage .is-read {\n  display: none;\n}\n\n.messages .created-at {\n  color: #777;\n  font-size: 0.6em;\n  word-break: keep-all;\n  text-align: right;\n}\n\n.messages .message-info {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  justify-content: flex-end;\n}\n</style>\n","import { render } from \"./messages.vue?vue&type=template&id=b625160e\"\nimport script from \"./messages.vue?vue&type=script&lang=js\"\nexport * from \"./messages.vue?vue&type=script&lang=js\"\n\nimport \"./messages.vue?vue&type=style&index=0&id=b625160e&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <form class=\"chat-form\">\n    <textarea\n      placeholder=\"輸入訊息\"\n      v-model=\"message\"\n      @keypress.enter.prevent=\"width > 768 ? handleSubmit() : handleLineFeed()\"\n    ></textarea>\n    <span class=\"material-icons\" @click=\"handleSubmit\"> send </span>\n  </form>\n</template>\n\n<script>\nimport { ref } from '@vue/reactivity';\nimport { timestamp } from '@/firebase/config';\nimport getUser from '@/composables/getUser';\nimport { useRoute } from 'vue-router';\nimport { projectFirestore } from '@/firebase/config';\nimport { watchEffect } from '@vue/runtime-core';\nimport useNestedCollection from '@/composables/useNestedCollection.js';\nimport useDocuments from '@/composables/useDocuments';\nimport useBreakpoints from '@/composables/useBreakPoints';\n\nexport default {\n  setup() {\n    const { user } = getUser();\n    const message = ref('');\n    const route = useRoute();\n    const userChange = ref(false);\n    const friendId = ref();\n    const userId = ref(user.value.uid);\n    const chatroomList = [];\n    const { width } = useBreakpoints();\n    const placeholder = ref('');\n    let sharedChatroom = useNestedCollection(\n      'chatrooms',\n      route.params.id,\n      'messages'\n    );\n\n    const getFriendChatroomInfo = async () => {\n      await projectFirestore\n        .collection('users')\n        .doc(friendId.value)\n        .collection('chatrooms')\n        .doc(route.params.id)\n        .get()\n        .then(res =>\n          chatroomList.push({\n            lastRead: res.data().lastRead.seconds,\n            lastInteractAt: res.data().lastInteractAt.seconds,\n            isActive: res.data().isActive,\n          })\n        );\n    };\n\n    watchEffect(async () => {\n      if (route.params.id) {\n        sharedChatroom = await useNestedCollection(\n          'chatrooms',\n          route.params.id,\n          'messages'\n        );\n        userChange.value = true;\n        console.log(userChange.value);\n      }\n    });\n\n    const handleLineFeed = () => {\n      console.log('換行');\n      message.value = message.value + '\\n';\n    };\n\n    const handleSubmit = async () => {\n      console.log('hi');\n      // 取得共享聊天室資訊\n      const chatroomInfo = await projectFirestore\n        .collection('chatrooms')\n        .doc(route.params.id)\n        .get()\n        .then(doc => {\n          return doc.data().usersId;\n        });\n\n      chatroomInfo[0] === user.value.uid\n        ? (friendId.value = chatroomInfo[1])\n        : (friendId.value = chatroomInfo[0]);\n\n      // 好友、使用者個別聊天室資訊\n      const userChatroom = await projectFirestore\n        .collection('users')\n        .doc(userId.value)\n        .collection('chatrooms')\n        .doc(route.params.id);\n\n      const friendChatroom = await projectFirestore\n        .collection('users')\n        .doc(friendId.value)\n        .collection('chatrooms')\n        .doc(route.params.id);\n\n      // 對話資訊\n      const chat = {\n        userId: userId.value,\n        isRead: false,\n        message: message.value,\n        createdAt: timestamp(),\n      };\n\n      // 清空對話欄\n      message.value = '';\n\n      //若對話欄無文字，則直接return\n      if (!chat.message) return;\n\n      //傳送對話資訊至共享聊天室\n      await sharedChatroom.addDoc(chat);\n\n      // 更新使用者個別聊天室資訊\n      await userChatroom.update({\n        dialog: chat.message,\n        lastInteractAt: timestamp(),\n        isDisplay: true,\n        ...(userChange.value && { chatroomOrder: timestamp() }),\n      });\n\n      // 更新好友個別聊天室資訊\n      await friendChatroom.update({\n        dialog: chat.message,\n        lastInteractAt: chat.createdAt,\n        isDisplay: true,\n        ...(userChange.value && { chatroomOrder: chat.createdAt }),\n      });\n      userChange.value = false;\n\n      // 傳送訊息後將好友個別聊天室的狀態更改為未讀\n      const { updateDoc: updateFriendChatroom } = useNestedCollection(\n        'users',\n        friendId.value,\n        'chatrooms'\n      );\n\n      await getFriendChatroomInfo();\n\n      //若再好友個別聊天室尚未開啟時，傳送訊息，會在對方的頁面上顯示未讀\n      await updateFriendChatroom(route.params.id, {\n        ...(!chatroomList[0].isActive && {\n          isRead: chatroomList[0].lastRead > chatroomList[0].lastInteractAt,\n        }),\n        lastRead: timestamp(),\n      });\n\n      const { updateDoc: updateUserInfo } = useDocuments(\n        'users',\n        friendId.value\n      );\n\n      await updateUserInfo({\n        ...(!chatroomList[0].isActive && {\n          messageIsRead: false,\n        }),\n      });\n\n      chatroomList.length = 0;\n    };\n    return { message, handleSubmit, width, handleLineFeed, placeholder };\n  },\n};\n</script>\n\n<style>\n.single-chatroom .chat-form {\n  text-align: left;\n  border-top: 1px solid #464749;\n  flex-shrink: 0;\n  flex-grow: 0;\n  display: flex;\n  overflow: hidden;\n  padding: 0.8rem;\n  gap: 0.4em;\n}\n\n.single-chatroom .chat-form textarea::-webkit-scrollbar {\n  display: none;\n}\n.single-chatroom .chat-form textarea {\n  height: 2.75em;\n  font-size: 1rem;\n  width: 100%;\n  background-color: inherit;\n  overflow: scroll;\n\n  color: white;\n  border: none;\n  outline: none;\n  resize: none;\n}\n\n.single-chatroom .material-icons {\n  color: #4e72fe;\n  align-self: center;\n  cursor: pointer;\n  font-size: 1.7rem;\n  transform: scale(1.2, 1.44);\n}\n\n@media (min-width: 768px) {\n  .single-chatroom .chat-form {\n    height: 6rem;\n  }\n\n  .single-chatroom .chat-form textarea {\n    max-height: 6em;\n    background-color: inherit;\n  }\n\n  .single-chatroom .material-icons {\n    display: none;\n  }\n}\n</style>\n","import { computed, onMounted, onUnmounted, ref } from 'vue';\n\nexport default function () {\n  let windowWidth = ref(window.innerWidth);\n\n  const onWidthChange = () => (windowWidth.value = window.innerWidth);\n  onMounted(() => window.addEventListener('resize', onWidthChange));\n  onUnmounted(() => window.removeEventListener('resize', onWidthChange));\n\n  const type = computed(() => {\n    if (windowWidth.value < 550) return 'xs';\n    if (windowWidth.value >= 550 && windowWidth.value < 1200) return 'md';\n    if (windowWidth.value >= 1200) return 'lg';\n    return null; // This is an unreachable line, simply to keep eslint happy.\n  });\n\n  const width = computed(() => windowWidth.value);\n\n  return { width, type };\n}\n","import { render } from \"./newChatForm.vue?vue&type=template&id=239da706\"\nimport script from \"./newChatForm.vue?vue&type=script&lang=js\"\nexport * from \"./newChatForm.vue?vue&type=script&lang=js\"\n\nimport \"./newChatForm.vue?vue&type=style&index=0&id=239da706&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./SingleChatroom.vue?vue&type=template&id=69da9598\"\nimport script from \"./SingleChatroom.vue?vue&type=script&lang=js\"\nexport * from \"./SingleChatroom.vue?vue&type=script&lang=js\"\n\nimport \"./SingleChatroom.vue?vue&type=style&index=0&id=69da9598&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Friends.vue?vue&type=template&id=3247e9a4\"\nimport script from \"./Friends.vue?vue&type=script&lang=js\"\nexport * from \"./Friends.vue?vue&type=script&lang=js\"\n\nimport \"./Friends.vue?vue&type=style&index=0&id=3247e9a4&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Chatroom.vue?vue&type=template&id=5214937a\"\nimport script from \"./Chatroom.vue?vue&type=script&lang=js\"\nexport * from \"./Chatroom.vue?vue&type=script&lang=js\"\n\nimport \"./Chatroom.vue?vue&type=style&index=0&id=5214937a&lang=css\"\n\nimport exportComponent from \"/Users/willy/Desktop/potato/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport './assets/main.css';\nimport { projectAuth } from './firebase/config';\n\nlet app;\n// window.addEventListener('resize', () => {\n//   let vh = window.innerHeight * 0.01;\n//   document.documentElement.style.setProperty('--vh', `${vh}px`);\n//   console.log(`${vh}`);\n// });\n\nprojectAuth.onAuthStateChanged(() => {\n  if (!app) {\n    app = createApp(App).use(router).mount('#app');\n  }\n});\n","import { createRouter, createWebHistory } from 'vue-router';\nimport Welcome from '../views/Welcome.vue';\nimport Chatroom from '../views/Chatroom';\n// import FriendList from '../views/FriendList';\n\n// route guard\n\nimport { projectAuth } from '../firebase/config';\n\nconst requireNoAuth = (to, from, next) => {\n  let user = projectAuth.currentUser;\n  if (!user) {\n    next({ name: 'Welcome' });\n  } else {\n    next();\n  }\n};\n\nconst requireAuth = (to, from, next) => {\n  let user = projectAuth.currentUser;\n  if (user) {\n    next({ name: 'Chatroom', params: { id: 'chatrooms' } });\n  } else {\n    next();\n  }\n};\n\nconst routes = [\n  {\n    path: '/',\n    name: 'Welcome',\n    component: Welcome,\n    beforeEnter: requireAuth,\n  },\n  {\n    path: '/chatroom/:id',\n    name: 'Chatroom',\n    component: Chatroom,\n    beforeEnter: requireNoAuth,\n    props: true,\n  },\n];\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes,\n});\n\nexport default router;\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./ChatroomList.vue?vue&type=style&index=0&id=fe1ea4d6&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Chatroom.vue?vue&type=style&index=0&id=5214937a&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./SignupForm.vue?vue&type=style&index=0&id=46a80bea&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./LoginForm.vue?vue&type=style&index=0&id=6fd22314&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./AddFriendForm.vue?vue&type=style&index=0&id=587f0748&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Friends.vue?vue&type=style&index=0&id=3247e9a4&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./SingleChatroom.vue?vue&type=style&index=0&id=69da9598&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./FriendList.vue?vue&type=style&index=0&id=05adbc7d&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./FriendRequestList.vue?vue&type=style&index=0&id=a550d90c&lang=css\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./App.vue?vue&type=style&index=0&id=cae6a4f6&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Navbar.vue?vue&type=style&index=0&id=3e3fb740&lang=css\""],"sourceRoot":""}